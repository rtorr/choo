import documentReady from'https://github.com/rtorr/document-ready/blob/master/index.min.js';import nanohistory from'https://github.com/rtorr/nanohistory/blob/master/index.min.js';import nanorouter from'https://github.com/rtorr/nanorouter/blob/master/index.min.js';import nanomount from'https://github.com/rtorr/nanomount/blob/master/index.min.js';import nanomorph from'https://github.com/rtorr/nanomorph/blob/master/index.min.js';import nanohref from'https://github.com/rtorr/nanohref/blob/master/index.min.js';import nanoraf from'https://github.com/rtorr/nanoraf/blob/master/index.min.js';import nanobus from'https://github.com/rtorr/nanobus/blob/master/index.min.js';import assert from'https://github.com/rtorr/assert/blob/master/index.min.js';export default function Choo(a){function d(){return p=m(createLocation()),o=nanoraf(function(){l&&j&&window.performance.mark('choo:renderStart');var r=m(createLocation());p=nanomorph(p,r),assert.notEqual(p,r,'choo.start: a different node type was returned as the root node on a rerender. Make sure that the root node is always the same type to prevent the application from being unmounted.'),l&&j&&(window.performance.mark('choo:renderEnd'),window.performance.measure('choo:render','choo:renderStart','choo:renderEnd'))}),n.prependListener('render',o),!1!=a.history&&(nanohistory(function(){n.emit('pushState')}),n.prependListener('pushState',function(r){r&&window.history.pushState({},null,r),n.emit('render'),setTimeout(function(){scrollIntoView()},0)}),!1!=a.href&&nanohref(function(r){var s=r.href,t=window.location.href;s===t||n.emit('pushState',s)})),documentReady(function(){n.emit('DOMContentLoaded')}),p}function f(r,s){n.emit(r,s)}a=a||{};var i={default:a.defaultRoute||'/404',curry:!0},j=!(a.timing!==void 0)||a.timing,k='undefined'!=typeof window,l=k&&window.performance&&window.performance.mark,m=nanorouter(i),n=nanobus(),o=null,p=null,q={};return{toString:function(r,s){q=s||{};var t=m(r);return assert.equal(),t.toString()},use:function(r){r(q,n)},mount:function(r){var s=d();documentReady(function(){var t=document.querySelector(r);assert.ok(t,'choo.mount: could not query selector: '+r),nanomount(t,s),p=t})},router:m,route:function(r,s){m.on(r,function(t){return function(){return q.params=t,s(q,f)}})},start:d}}function scrollIntoView(){var a=window.location.hash;if(a)try{var b=document.querySelector(a);b&&b.scrollIntoView(!0)}catch(c){}}function createLocation(){var a=window.location.pathname.replace(/\/$/,''),b=window.location.hash.replace(/^#/,'/');return a+b}

